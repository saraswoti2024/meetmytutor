{% extends "base.html" %}
{% load static %}
{% block content %}
<main class="min-h-screen bg-gray-100 py-10 px-4 sm:px-6 lg:px-8">
  <div class="max-w-7xl mx-auto bg-white rounded-xl shadow-lg overflow-hidden md:flex">
    <!-- Left side: Profile summary -->
    <div class="md:w-1/3 p-8 bg-blue-700 text-white flex flex-col items-center justify-center space-y-6">
      {% if request.user.profile.profile_img %}
      <img id="profileAvatarDisplay" src="{{ request.user.profile.profile_img.url }}" alt="Tutor Avatar"
        class="w-48 h-48 rounded-full object-cover border-4 border-blue-300 shadow-xl">
      {% else %}
      <img id="profileAvatarDisplay" src="{% static 'images/default.jpg' %}" alt="Tutor Avatar"
        class="w-48 h-48 rounded-full object-cover border-4 border-blue-300 shadow-xl">
      {% endif %}
      <h4 id="profileNameDisplay" class="text-3xl font-extrabold mt-4">{{ request.user.first_name }}
        {{ request.user.last_name }}</h4>
      <div class="flex items-center text-xl space-x-2">
        <span id="ratingDisplay" class="text-yellow-400">★★★★☆</span>
        <span id="ratingValue" class="text-blue-200">(4.5)</span>
      </div>
      <p class="text-blue-200 text-lg">{{ request.user.usertype }}</p>

      <a href="{% url 'edit_tutor_profile' %}">
        <button
          class="w-full max-w-xs bg-yellow-400 hover:bg-yellow-500 text-blue-900 font-bold py-3 px-6 rounded-lg flex items-center justify-center gap-2 transition duration-300 ease-in-out transform hover:scale-105 shadow-md"
          id="editProfileBtn">
          <i class="bi bi-pencil-square text-xl"></i>Edit Profile
        </button>
      </a>
      <a href="tutor_changePassword.html"
        class="w-full max-w-xs border border-blue-300 hover:border-blue-400 text-blue-100 hover:text-white font-semibold py-3 px-6 rounded-lg flex items-center justify-center gap-2 transition duration-300 ease-in-out transform hover:scale-105 shadow-md">
        <i class="bi bi-key text-xl"></i>Change Password
      </a>
    </div>

    <!-- Right side: Profile details -->
    <div class="md:w-2/3 p-8 space-y-10">
      <div id="profileDisplaySection" class="space-y-6">
        <h5 class="text-3xl font-bold text-gray-800 border-b-2 pb-3 mb-6 border-blue-500">Personal Information</h5>

        <ul class="space-y-6">

          <li class="grid grid-cols-3 gap-4 items-center text-lg text-gray-700">
            <div class="flex items-center col-span-1">
              <i class="bi bi-person text-blue-500 mr-3 text-xl"></i>
              <strong class="font-semibold text-gray-800">Full Name:</strong>
            </div>
            <div id="fullNameDisplay" class="col-span-2 text-gray-700">
              {{ request.user.first_name }} {{ request.user.last_name }}
            </div>
          </li>

          <li class="grid grid-cols-3 gap-4 items-center text-lg text-gray-700">
            <div class="flex items-center col-span-1">
              <i class="bi bi-person text-blue-500 mr-3 text-xl"></i>
              <strong class="font-semibold text-gray-800"> Username:</strong>
            </div>
            <div id="fullNameDisplay" class="col-span-2 text-gray-700">
              {{ request.user.username }}
            </div>
          </li>


          <li class="grid grid-cols-3 gap-4 items-center text-lg text-gray-700">
            <div class="flex items-center col-span-1">
              <i class="bi bi-envelope text-blue-500 mr-3 text-xl"></i>
              <strong class="font-semibold text-gray-800">Email:</strong>
            </div>
            <div id="emailDisplay" class="col-span-2 text-gray-700">{{ request.user.email }}</div>
          </li>

          <li class="grid grid-cols-3 gap-4 items-center text-lg text-gray-700">
            <div class="flex items-center col-span-1">
              <i class="bi bi-person-bounding-box text-blue-500 mr-3 text-xl"></i>
              <strong class="font-semibold text-gray-800">Age:</strong>
            </div>
            <div id="ageDisplay" class="col-span-2 text-gray-700">{{ request.user.profile.age }}</div>
          </li>

          <li class="grid grid-cols-3 gap-4 items-center text-lg text-gray-700">
            <div class="flex items-center col-span-1">
              <i class="bi bi-gender-ambiguous text-blue-500 mr-3 text-xl"></i>
              <strong class="font-semibold text-gray-800">Gender:</strong>
            </div>
            <div id="genderDisplay" class="col-span-2 text-gray-700">{{ request.user.profile.gender }}</div>
          </li>

          <li class="grid grid-cols-3 gap-4 items-center text-lg text-gray-700">
            <div class="flex items-center col-span-1">
              <i class="bi bi-award text-blue-500 mr-3 text-xl"></i>
              <strong class="font-semibold text-gray-800">Qualification:</strong>
            </div>
            <div id="qualificationDisplay" class="col-span-2 text-gray-700">{{ request.user.profile.qualification }}</div>
          </li>

          <li class="grid grid-cols-3 gap-4 items-center text-lg text-gray-700">
            <div class="flex items-center col-span-1">
              <i class="bi bi-currency-exchange text-blue-500 mr-3 text-xl"></i>
              <strong class="font-semibold text-gray-800">Session Price:</strong>
            </div>
            <div id="priceDisplay" class="col-span-2 text-gray-700">
              Rs. {{ request.user.profile.session_price }}/hour
            </div>
          </li>

          <!-- Education Levels & Subjects -->
          <li class="grid grid-cols-3 gap-4 text-lg text-gray-700">
            <div class="flex items-start col-span-1">
              <i class="bi bi-book text-blue-500 mr-3 text-xl mt-1"></i>
              <strong class="font-semibold text-gray-800">Education Levels & Subjects:</strong>
            </div>
            <div class="col-span-2 space-y-2">
              {% for item in request.user.profile.education_data %}
              <div class="bg-gray-100 px-4 py-2 rounded-lg shadow-sm">
                <div class="text-sm font-semibold text-gray-800">{{ item.level|capfirst }}</div>
                <div class="text-sm text-gray-600">{{ item.subjects|join:", " }}</div>
              </div>
              {% empty %}
              <div class="text-gray-500 italic">No education data available.</div>
              {% endfor %}
            </div>
          </li>

          <!-- CV/Documents -->
          <li class="grid grid-cols-3 gap-4 items-center text-lg text-gray-700">
            <div class="flex items-center col-span-1">
              <i class="bi bi-file-earmark-text text-blue-500 mr-3 text-xl"></i>
              <strong class="font-semibold text-gray-800">CV/Documents:</strong>
            </div>
            <div class="col-span-2">
              {% if request.user.profile.cv %}
              <a href="{{ request.user.profile.cv.url }}" target="_blank" class="text-blue-600 hover:underline cursor-pointer">
                View / Download
              </a>
              {% else %}
              <span class="text-gray-500">No CV uploaded</span>
              {% endif %}
            </div>
          </li>

          <!-- Description -->
          <li class="grid grid-cols-3 gap-4 text-lg text-gray-700">
            <div class="flex items-start col-span-1">
              <i class="bi bi-info-circle text-blue-500 mr-3 text-xl mt-1"></i>
              <strong class="font-semibold text-gray-800">Description:</strong>
            </div>
            <div class="col-span-2" id="descriptionDisplay">
              {% if request.user.profile.desc %}
                  {{ request.user.profile.desc }}
              {% endif %}
              <i>no description</i>
         
            </div>
          </li>
        </ul>

        <h5 class="text-3xl font-bold text-gray-800 border-b-2 pb-3 mb-6 border-blue-500 mt-8">Location Details</h5>
        <ul class="space-y-6">
          <li class="grid grid-cols-3 gap-4 items-center text-lg text-gray-700">
            <div class="flex items-center col-span-1">
              <i class="bi bi-building text-blue-500 mr-3 text-xl"></i>
              <strong class="font-semibold text-gray-800">District:</strong>
            </div>
            <div id="districtDisplay" class="col-span-2 text-gray-700">{{ request.user.profile.district }}</div>
          </li>

          <li class="grid grid-cols-3 gap-4 items-center text-lg text-gray-700">
            <div class="flex items-center col-span-1">
              <i class="bi bi-map text-blue-500 mr-3 text-xl"></i>
              <strong class="font-semibold text-gray-800">Address:</strong>
            </div>
            <div id="addressDisplay" class="col-span-2 text-gray-700">{{ request.user.profile.address }}</div>
          </li>

          <li class="grid grid-cols-3 gap-4 items-center text-lg text-gray-700">
            <div class="flex items-center col-span-1">
              <i class="bi bi-geo-alt text-blue-500 mr-3 text-xl"></i>
              <strong class="font-semibold text-gray-800">Location Access:</strong>
            </div>
            <div class="col-span-2">
              {% if request.user.profile.location_access %}
              <span class="text-green-600"><i class="bi bi-check-circle-fill mr-1"></i>Allowed</span>
              {% else %}
              <span class="text-red-600"><i class="bi bi-x-circle-fill mr-1"></i>Not Allowed</span>
              {% endif %}
            </div>
          </li>
        </ul>
      </div>
    </div>
  </div>
</main>
{% endblock content %}
