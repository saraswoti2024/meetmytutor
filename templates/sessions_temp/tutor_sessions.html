{% extends "base.html" %}
{% block content %}
  {% load static %}
  <div class="bg-gradient-to-r from-indigo-50 to-purple-50 py-12">
    <div class="max-w-6xl mx-auto px-6">
      <h1 class="text-4xl font-bold text-gray-800 mb-2">Tutor Sessions</h1>
      <p class="text-lg text-gray-600 mb-8">Manage your scheduled, ongoing, and completed tutoring sessions.</p>

      <div class="mb-6 border-b border-gray-200">
        <ul class="flex -mb-px text-sm font-medium text-center text-gray-500" id="sessionTabs" role="tablist">
          <li class="me-2">
            <button class="inline-block p-4 text-blue-600 border-b-2 border-blue-600 rounded-t-lg active" id="scheduled-tab" data-bs-toggle="tab" data-bs-target="#scheduled" type="button" role="tab" aria-controls="scheduled" aria-selected="true">Scheduled Sessions</button>
          </li>
          <li class="me-2">
            <button class="inline-block p-4 border-b-2 border-transparent rounded-t-lg hover:text-gray-600 hover:border-gray-300" id="running-tab" data-bs-toggle="tab" data-bs-target="#running" type="button" role="tab" aria-controls="running" aria-selected="false">Running Sessions</button>
          </li>
          <li>
            <button class="inline-block p-4 border-b-2 border-transparent rounded-t-lg hover:text-gray-600 hover:border-gray-300" id="completed-tab" data-bs-toggle="tab" data-bs-target="#completed" type="button" role="tab" aria-controls="completed" aria-selected="false">Completed Sessions</button>
          </li>
        </ul>
      </div>

      <div id="sessionTabsContent">
        <!-- Scheduled Tab -->
        <div id="scheduled" role="tabpanel" aria-labelledby="scheduled-tab">
          <h2 class="text-2xl font-semibold mb-4">Scheduled Sessions</h2>
          <div class="overflow-x-auto">
            <table class="min-w-full bg-white text-sm text-left text-gray-500">
              <thead class="text-xs text-gray-700 uppercase bg-gray-100">
                <tr>
                  <th class="px-6 py-3">Student Name</th>
                  <th class="px-6 py-3">Subject</th>
                  <th class="px-6 py-3">Start Date</th>
                  <th class="px-6 py-3">End Date</th>
                  <th class="px-6 py-3">Session Time</th>
                </tr>
              </thead>
              <tbody>
                {% for i in req_list  %}
                  
            
                <tr class="bg-white border-b">
                  <td class="px-6 py-4">{{i.student_user.user.first_name}} {{i.student_user.user.last_name}} </td>
                  <td class="px-6 py-4">{% for v in i.subject.all %}
                    {{v.subject_name}},
                  {% endfor %}</td>
                  <td class="px-6 py-4">
                    {% if i.counter_start_date %}
                    {{i.counter_start_date}}
                       {% else %} 
                    {{i.session_start_date}}
                    {% endif %}
                </td>
                  <td class="px-6 py-4">{% if i.counter_end_date %}
                    {{i.counter_end_date}}
                    {% else %}
                    {{i.session_end_date}}
                  {% endif %}</td>
                  <td class="px-6 py-4">{% if i.counter_time_from %}
                    {{i.counter_time_from}} - {{i.counter_time_to}}

                    {% else %}
                    {{i.session_time_from}} - {{i.session_time_to}}
                  {% endif %}</td>
                </tr>

                {% endfor %}
              </tbody>
            </table>
          </div>
          <p class="mt-4 text-center text-sm text-gray-500">No upcoming sessions? <a href="tutor_students.html" class="text-blue-600 hover:underline">Check your student list</a> to manage requests.</p>
        </div>

        <!-- Running Tab -->
        <div class="hidden" id="running" role="tabpanel" aria-labelledby="running-tab">
          <h2 class="text-2xl font-semibold mb-4">Running Sessions</h2>
          <div class="overflow-x-auto">
            <table class="min-w-full bg-white text-sm text-left text-gray-500">
              <thead class="text-xs text-gray-700 uppercase bg-gray-100">
                <tr>
                  <th class="px-6 py-3">Student Name</th>
                  <th class="px-6 py-3">Subject</th>
                  <th class="px-6 py-3">Start Date</th>
                  <th class="px-6 py-3">End Date</th>
                  <th class="px-6 py-3">Session Time</th>
                  <th class="px-6 py-3">Remaining Session Days</th>
                </tr>
              </thead>
              <tbody>
                <tr class="bg-white border-b">
                  <td class="px-6 py-4">Mina Thapa</td>
                  <td class="px-6 py-4">English</td>
                  <td class="px-6 py-4">2025-06-01</td>
                  <td class="px-6 py-4">2025-07-30</td>
                  <td class="px-6 py-4">5:00 PM - 6:00 PM</td>
                  <td class="px-6 py-4">16 Days Remaining</td>
                </tr>
                <tr class="bg-white border-b">
                  <td class="px-6 py-4">Ram Shrestha</td>
                  <td class="px-6 py-4">Science</td>
                  <td class="px-6 py-4">2025-06-15</td>
                  <td class="px-6 py-4">2025-08-15</td>
                  <td class="px-6 py-4">7:00 AM - 8:00 AM</td>
                  <td class="px-6 py-4">32 Days Remaining</td>
                </tr>
              </tbody>
            </table>
          </div>
          <p class="mt-4 text-center text-sm text-gray-500">Track session progress or <a href="tutor_messages.html" class="text-blue-600 hover:underline">message your students</a> for updates.</p>
        </div>

        <!-- Completed Tab -->
        <div class="hidden" id="completed" role="tabpanel" aria-labelledby="completed-tab">
          <h2 class="text-2xl font-semibold mb-4">Completed Sessions</h2>
          <div class="overflow-x-auto">
            <table class="min-w-full bg-white text-sm text-left text-gray-500">
              <thead class="text-xs text-gray-700 uppercase bg-gray-100">
                <tr>
                  <th class="px-6 py-3">Student Name</th>
                  <th class="px-6 py-3">Subject</th>
                  <th class="px-6 py-3">Start Date</th>
                  <th class="px-6 py-3">End Date</th>
                  <th class="px-6 py-3">Session Time</th>
                  <th class="px-6 py-3">Total Session Days</th>
                  <th class="px-6 py-3">Student Feedback</th>
                </tr>
              </thead>
              <tbody>
                <tr class="bg-white border-b">
                  <td class="px-6 py-4">Priya Dahal</td>
                  <td class="px-6 py-4">English</td>
                  <td class="px-6 py-4">2025-01-10</td>
                  <td class="px-6 py-4">2025-02-10</td>
                  <td class="px-6 py-4">2:00 PM - 3:00 PM</td>
                  <td class="px-6 py-4">31 Days</td>
                  <td class="px-6 py-4">
                    <button class="text-blue-600 hover:underline" data-bs-toggle="modal" data-bs-target="#feedbackModal">View Feedback</button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <p class="mt-4 text-center text-sm text-gray-500">View past session details or <a href="tutor_earnings.html" class="text-blue-600 hover:underline">check your earnings</a>.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Feedback Modal -->
  <div class="modal fade" id="feedbackModal" tabindex="-1" aria-labelledby="feedbackModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="feedbackModalLabel">Student Feedback</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3 text-center">
            <p class="text-sm font-medium text-gray-700">Student Rating</p>
            <div class="flex justify-center space-x-1 text-yellow-400">
              <i class="bi bi-star-fill"></i>
              <i class="bi bi-star-fill"></i>
              <i class="bi bi-star-fill"></i>
              <i class="bi bi-star-fill"></i>
              <i class="bi bi-star-fill"></i>
            </div>
          </div>
          <div class="mb-3">
            <p class="text-sm font-medium text-gray-700">Student Review</p>
            <p class="text-gray-600">Great tutor, very clear explanations!</p>
          </div>
        </div>
      </div>
    </div>
  </div>
{% endblock content %}
